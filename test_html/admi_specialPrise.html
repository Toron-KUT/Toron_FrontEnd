<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>特価情報管理ページ</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="base.css" type="text/css" media="screen" />
    <script type = "text/javascript">
  <!--
  function functionName()
  {
  var select1 = document.forms.formName.selectName1; //変数select1を宣言
  var select2 = document.forms.formName.selectName2; //変数select2を宣言

  select2.options.length = 0; // 選択肢の数がそれぞれに異なる場合、これが重要
  select2.options[0] = new Option("選択してください");
  if (select1.options[select1.selectedIndex].value == "肉")
  {

  select2.options[1] = new Option("牛肉");
  select2.options[2] = new Option("鶏肉");
  select2.options[3] = new Option("豚肉");
  }

  else if (select1.options[select1.selectedIndex].value == "野菜")
  {

  select2.options[1] = new Option("キャベツ");
  select2.options[2] = new Option("きゅうり");
  select2.options[3] = new Option("レタス");
  select2.options[4] = new Option("たまねぎ");
  select2.options[5] = new Option("人参");
  select2.options[6] = new Option("白菜");
  select2.options[7] = new Option("ジャガイモ");
  }

  else if (select1.options[select1.selectedIndex].value == "果物")
  {
  select2.options[1] = new Option("リンゴ");
  select2.options[2] = new Option("もも");
  select2.options[3] = new Option("キウイ");
  select2.options[4] = new Option("オレンジ");
  }
  else if (select1.options[select1.selectedIndex].value == "魚")
  {
  select2.options[1] = new Option("刺身");
  select2.options[2] = new Option("切り身");
  }
  else if (select1.options[select1.selectedIndex].value == "パン")
  {
  select2.options[1] = new Option("やまざき");
  select2.options[2] = new Option("どら焼き");
  }
  else if (select1.options[select1.selectedIndex].value == "乳製品")
  {
  select2.options[1] = new Option("チーズ");
  select2.options[2] = new Option("牛乳");
  select2.options[3] = new Option("ヨーグルト");
  }
  else if (select1.options[select1.selectedIndex].value == "惣菜")
  {
  select2.options[1] = new Option("弁当");
  select2.options[2] = new Option("揚げ物");
  }
  }
  //-->
  function creatTable (){
    // 表の作成開始
    if(count_col != 1){
    var table = document.getElementById("table");
    var tenpo_name = document.getElementById ("tenpo_name").value;
    var cellphone = document.getElementById ("cellphone").value;
    var address = document.getElementById ("address").value;
    var tentyouName = document.getElementById ("tentyouName").value;
    var data = [count_cord, tenpo_name, cellphone, address, tentyouName];
    // 表に2次元配列の要素を格納
    table.style.border ="1px solid";         //枠

      var rows = table.insertRow(-1);        // 新しい行の追加//-1で下に追加する
        for(j = 0; j < 4; j++){
          var  cell=rows.insertCell(-1);    //列
            cellNode = document.createTextNode(data[j]);
            cell.appendChild(cellNode);     //データノードの作成、ノードの連結
            cell.style.border ="1px solid"; //枠
        }
      //  Number(count_cord);
      //  parseInt(count_cord);
        count_cord += 1;
      //  String(count_cord);
    //    count_cord.toString(10);
      }
  }
  function soldFlag() {
    var table = document.getElementById("table");
    var rows = table.rows.length;


    //
    for (var i = 0; i < rows; i ++) {
      if(i == 0)continue;
      var cell = table.rows[i].insertCell(-1);

  //  alert();
//cell.innerHTML ="削除";
     var newButton2 = document.createElement("BUTTON");
     newButton2.textContent="品切れ";
     cell.appendChild(newButton2);
     newButton2.onclick = function() {
       table.style.color = "#444"
     }
    }
    var newButton = document.createElement("BUTTON");
    newButton.textContent="編集終了";
    document.getElementById("table").appendChild(newButton);
    //--編集終了のボタンを押したときの反応
              newButton.onclick= function() {
    // 削除を削除
                for ( var i = 0; i < rows; i++) {
                  if (i == 0) continue;
                  table.rows[i].deleteCell(-1);
                }
                newButton.parentNode.removeChild(newButton);

                count_col = 0;

    }
  }
  var count_col;
  function deleteTable() {
    //count_col +=1;
    //if(count_col ==1){


    var table = document.getElementById("table");
    var rows = table.rows.length;


    //
    for (var i = 0; i < rows; i ++) {
      if(i == 0)continue;
      var cell = table.rows[i].insertCell(-1);

  //  alert();
//cell.innerHTML ="削除";
     var newButton2 = document.createElement("BUTTON");
     newButton2.textContent="削除";
     cell.appendChild(newButton2);
  //   newButton2.onclick = function() {
    //   table.deleteRow(1);
    // }
    }
    var newButton = document.createElement("BUTTON");
    newButton.textContent="編集終了";
    document.getElementById("table").appendChild(newButton);
    //--編集終了のボタンを押したときの反応
              newButton.onclick= function() {
    // 削除を削除
                for ( var i = 0; i < rows; i++) {
                  if (i == 0) continue;
                  table.rows[i].deleteCell(-1);
                }
                newButton.parentNode.removeChild(newButton);

                count_col = 0;

    }
//}

  }
  </script>
</head>

<!--以下通常のドロップボタン-->
<body bgcolor onLoad="functionName()">
  <div id="wrapper">
  <div id="contents">
   <h3> <p class="logo">*** 株式会社マルナカ | 特価情報管理ページ***</p></h3>
    <p class="description">*** 管理者専用ページです。特価情報の編集を行えます ***</p>
      <h5>特価情報選択</h5>
<form name="formName" method="post" action="./pathToProgramFile">
<!--選択肢その1-->
<select name = "selectName1" onChange="functionName()">
<option value = "しらんがな">選択してください</option>
<option value = "肉">肉</option>
<option value = "野菜">野菜</option>
<option value = "魚">魚</option>
<option value = "パン">パン</option>
<option value = "果物">果物</option>
<option value = "乳製品">乳製品</option>
<option value = "惣菜">惣菜</option>
</select>

<!--選択肢その2（選択肢その1の項目によって変化）-->
<select name = "selectName2">
</select>
<select name = "selectName3" onChange="functionName()">
<option value = "しらんがな">選択してください</option>
<option value = "10">10%</option>
<option value = "20">20%</option>
<option value = "30">30%</option>
<option value = "40">40%</option>
<option value = "50">50%</option>
</select>
<input name="button" type="button" value="登録" onClick="creatTable()">
<h5>登録された商品</h5>
<input name="delete" type="button" value="登録情報削除" onClick="deleteTable()">
<input name="delete" type="button" value="品切れ商品の登録" onClick="soldFlag()">
<br><br>
<table border="1" id = "table">
  <tr>
    <th>商品コード</th><th>商品名</th><th>定価</th><th>商品価格</th>
  </tr>
  <tr>
    <th>00001</th><th>牛肉</th><th>559</th><th>500</th>
  </tr>
  <tr>
  <th>00004</th><th>キャベツ</th><th>150</th><th>78</th>
</tr>
</table>
</body>
</html>
